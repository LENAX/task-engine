# config/workflows/example-workflow.yaml
# 核心调整：
# 1. Callback不再独立配置，直接内聚到所属Task节点下
# 2. 所有同步相关任务（交易日历、日线、财务）归属同一个Workflow
workflows:
  # Job定义（仅做函数映射，回调逻辑移至Task层级）
  jobs:
    - job_id: "example-job-1"
      func_key: "exampleJob1"
      description: "示例Job 1"
      timeout: "30s"

    - job_id: "example-job-2"
      func_key: "exampleJob2"
      description: "示例Job 2"
      timeout: "60s"

  # Workflow定义（所有同步任务归属同一个Workflow）
  definitions:
    - workflow_id: "example-workflow"
      description: "示例工作流"
      tasks:
        # 核心Task1：示例任务1
        - task_id: "task-1"
          job_id: "example-job-1"
          params: {}
          dependencies: []
          # 该Task专属Callback（内聚到Task节点）
          callbacks:
            - state: "success"
              func_key: "exampleSuccessCallback"
              description: "任务1成功回调"
            - state: "failed"
              func_key: "exampleFailedCallback"
              description: "任务1失败回调（触发告警）"

        # Task2：示例任务2（依赖Task1）
        - task_id: "task-2"
          job_id: "example-job-2"
          params: {}
          dependencies: ["task-1"]
          callbacks:
            - state: "success"
              func_key: "exampleSuccessCallback"
              description: "任务2成功回调"
            - state: "failed"
              func_key: "exampleFailedCallback"
              description: "任务2失败回调（触发告警）"

