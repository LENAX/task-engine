# 纯框架通用配置，适用于开发环境，无任何业务内容
task-engine:
  # 基础通用配置
  general:
    instance_name: "task-engine-dev"
    log_level: "debug"                    # 日志级别：debug/info/warn/error
    env: "dev"                            # 运行环境标识

  # 存储配置（SQLite/缓存）
  storage:
    database:
      type: "sqlite"                      # 保持SQLite类型不变
      dsn: "file::memory:?cache=shared&_journal_mode=WAL&_sync=normal"  # 替换原path为DSN，新增WAL参数
      max_open_conns: 3                   # WAL模式下连接数建议≤5（避免锁冲突）
      max_idle_conns: 1
      conn_max_lifetime: "2h"
      conn_max_idle_time: "1h"            # 新增：适配WAL模式的空闲连接回收

    cache:
      enabled: true                       # 开启缓存（避免重复请求）
      default_ttl: "1h"                   # 缓存默认过期时间
      clean_interval: "30m"               # 缓存清理间隔

  # 执行规则配置（全局通用）
  execution:
    default_task_timeout: "30s"           # 任务默认超时（适配Tushare API请求）
    worker_concurrency: 3                 # 开发环境低并发（避免API限流）
    retry:                                # 全局重试规则
      enabled: true
      max_attempts: 3                     # 最大重试次数
      delay: "1s"                         # 重试间隔
      max_delay: "5s"                     # 最大重试间隔（指数退避）

